{% extends 'base.html' %}

{% block title %}Diary{% endblock %}

{% block head %} 
<link rel="stylesheet" href="/static/styles.css">
{% endblock %}

{% block nav %}
<!-- fix link below -->
<a href="/diary/<username>"> My Diary</a> 
<a href="/logout" action="/logout"> Logout</a>

<form action="/search" method="POST"> 
    <input type="text" placeholder="search for friends" name="search"> 
    <input type="submit" value="submit">
</form>
{% for message in get_flashed_messages() %}
          <p class="flash-message">     
            {{ message }}
          </p>
{% endfor %}

{% endblock %}
{% block body %}
<!-- body content here -->
<h1>My Diary</h1>

<p>Hello {{username}}!</p>

{% if read_write %}
<div id="create_post" class="post">
    
    <div id="song_data"> 

    </div>
   
    <div>
        <form id="music_search_form"> 
            <p> 
                <p>
                    <input type="text" placeholder="What are you listening to today?" id="music_search_input">
                </p>
            </p>
        </form>
    </div>


    <div id="populate_music_post"> 
        <form id="submit_final_post" action="/save_song_to_database" method="POST"> 
            <!-- add hidden input fields here where i can save values 
            to send to the server -->
            <input type="hidden" id="song_name" name="name" value="id">
            <input type="hidden" id="song_url" name="url" value="id">
            <input type="hidden" id="song_img" name="img" value="id">
            <input type="hidden" id="song_id" name="id" value="id">

            <input id="comment" type="text" name="post_content" placeholder="Type music commentary here!">
            <input type="submit" value="submit post">
        </form>
    </div>
</div> 


<form id="list_of_search_results">

</form>
{% endif %}

<div id="user_posts"> 
    {% for post in posts %}
    <div class="post" id="{{post.post_id}}">
        <img src="{{post.music_img}}">
        <a href="{{post.music_url}}">{{post.music_title}} </a>
        <p> {{post.post_content}}</p>
        <p> {{post.date.strftime('%m-%d-%Y')}}</p>

        {% if read_write %}
        <form class="delete_post" id="{{post.post_id}}"> 
            <input type="submit" value="delete"> 
        </form>
        {% endif %}
        <div>
            <div id="like_count">{{post.likes}}</div>
            <button type="button" class="like_post" id="{{post.post_id}}"> Like </button>
        </div>
        
    </div>  
    {% endfor %}
</div>

<script src="/static/js/diary.js"> </script>
{% endblock %}